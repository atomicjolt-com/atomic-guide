# Atomic Guide Deep Linking Assessment Features Fullstack Architecture Document

## Table of Contents

- [Atomic Guide Deep Linking Assessment Features Fullstack Architecture Document](#table-of-contents)
  - [1. Introduction](./1-introduction.md)
    - [Architectural Approach](./1-introduction.md#architectural-approach)
    - [Project Context](./1-introduction.md#project-context)
    - [Related Documentation](./1-introduction.md#related-documentation)
    - [Change Log](./1-introduction.md#change-log)
  - [2. High Level Architecture](./2-high-level-architecture.md)
    - [Technical Summary](./2-high-level-architecture.md#technical-summary)
    - [Platform and Infrastructure Choice](./2-high-level-architecture.md#platform-and-infrastructure-choice)
    - [Repository Structure (Vertical Slice Architecture)](./2-high-level-architecture.md#repository-structure-vertical-slice-architecture)
    - [High Level Architecture Diagram](./2-high-level-architecture.md#high-level-architecture-diagram)
    - [Architectural Patterns](./2-high-level-architecture.md#architectural-patterns)
  - [3. Tech Stack](./3-tech-stack.md)
  - [4. Data Models](./4-data-models.md)
    - [Core Assessment Models](./4-data-models.md#core-assessment-models)
      - [Conversation Model](./4-data-models.md#conversation-model)
      - [AssessmentConfig Model](./4-data-models.md#assessmentconfig-model)
    - [Cognitive Learning Models](./4-data-models.md#cognitive-learning-models)
      - [Learner Profile Model](./4-data-models.md#learner-profile-model)
      - [Learning Session Model](./4-data-models.md#learning-session-model)
      - [Knowledge Graph Model](./4-data-models.md#knowledge-graph-model)
    - [Message and Progress Models](./4-data-models.md#message-and-progress-models)
      - [ConversationMessage Model](./4-data-models.md#conversationmessage-model)
      - [StudentProgress Model](./4-data-models.md#studentprogress-model)
    - [Redux State Models](./4-data-models.md#redux-state-models)
      - [Global Application State](./4-data-models.md#global-application-state)
      - [Vectorize Search Models](./4-data-models.md#vectorize-search-models)
  - [5. API Specification](./5-api-specification.md)
    - [REST API Specification](./5-api-specification.md#rest-api-specification)
    - [Cognitive Analytics APIs](./5-api-specification.md#cognitive-analytics-apis)
      - [Profile Management](./5-api-specification.md#profile-management)
      - [Behavioral Signal Ingestion](./5-api-specification.md#behavioral-signal-ingestion)
    - [AI Guide Chat APIs](./5-api-specification.md#ai-guide-chat-apis)
      - [Send Chat Message](./5-api-specification.md#send-chat-message)
      - [Chat WebSocket Connection](./5-api-specification.md#chat-websocket-connection)
    - [RTK Query API Implementation](./5-api-specification.md#rtk-query-api-implementation)
      - [API Slice Configuration](./5-api-specification.md#api-slice-configuration)
      - [Real-time WebSocket Integration](./5-api-specification.md#real-time-websocket-integration)
    - [MCP Protocol Implementation](./5-api-specification.md#mcp-protocol-implementation)
      - [MCP Server Architecture](./5-api-specification.md#mcp-server-architecture)
      - [MCP OAuth Endpoints](./5-api-specification.md#mcp-oauth-endpoints)
  - [6. Components](./6-components.md)
    - [AI Assessment Service](./6-components.md#ai-assessment-service)
    - [Cognitive Engine Service](./6-components.md#cognitive-engine-service)
    - [Canvas Integration Service](./6-components.md#canvas-integration-service)
    - [Canvas Monitor Client](./6-components.md#canvas-monitor-client)
    - [Conversation Manager (Durable Object)](./6-components.md#conversation-manager-durable-object)
    - [AI Guide Chat Service](./6-components.md#ai-guide-chat-service)
    - [Chat UI Components](./6-components.md#chat-ui-components)
    - [Assessment UI Components](./6-components.md#assessment-ui-components)
    - [Cloudflare AI Service](./6-components.md#cloudflare-ai-service)
    - [Vectorize Search Service](./6-components.md#vectorize-search-service)
    - [Video Micro-Learning Service](./6-components.md#video-micro-learning-service)
    - [Instructor Activity Approval Service](./6-components.md#instructor-activity-approval-service)
    - [Component Interaction Diagram](./6-components.md#component-interaction-diagram)
    - [Site Embedding Service](./6-components.md#site-embedding-service)
  - [7. External APIs](./7-external-apis.md)
    - [OpenAI API](./7-external-apis.md#openai-api)
    - [Canvas LMS API](./7-external-apis.md#canvas-lms-api)
  - [8. Core Workflows](./8-core-workflows.md)
    - [Deep Link Configuration Workflow](./8-core-workflows.md#deep-link-configuration-workflow)
    - [Student Assessment Workflow](./8-core-workflows.md#student-assessment-workflow)
  - [9. Database Schema](./9-database-schema.md)
    - [D1 Database Schema (SQL)](./9-database-schema.md#d1-database-schema-sql)
  - [10. Frontend Architecture](./10-frontend-architecture.md)
    - [Two-UI Architecture Overview](./10-frontend-architecture.md#two-ui-architecture-overview)
    - [Component Architecture](./10-frontend-architecture.md#component-architecture)
      - [Component Organization](./10-frontend-architecture.md#component-organization)
      - [React-Based LTI Launch Entry Point](./10-frontend-architecture.md#react-based-lti-launch-entry-point)
      - [Component Template](./10-frontend-architecture.md#component-template)
    - [State Management Architecture](./10-frontend-architecture.md#state-management-architecture)
      - [Redux Toolkit + RTK Query Configuration](./10-frontend-architecture.md#redux-toolkit-rtk-query-configuration)
      - [Feature Slice Example with Redux Toolkit](./10-frontend-architecture.md#feature-slice-example-with-redux-toolkit)
    - [Routing Architecture](./10-frontend-architecture.md#routing-architecture)
      - [Route Organization](./10-frontend-architecture.md#route-organization)
      - [Protected Route Pattern](./10-frontend-architecture.md#protected-route-pattern)
    - [Frontend Services Layer](./10-frontend-architecture.md#frontend-services-layer)
      - [API Client Setup](./10-frontend-architecture.md#api-client-setup)
  - [11. LTI Architecture](./11-lti-architecture.md)
    - [Overview](./11-lti-architecture.md#overview)
    - [LTI Standards Implementation](./11-lti-architecture.md#lti-standards-implementation)
      - [Core LTI 1.3 Support](./11-lti-architecture.md#core-lti-13-support)
      - [LTI Advantage Services](./11-lti-architecture.md#lti-advantage-services)
        - [Deep Linking 2.0](./11-lti-architecture.md#deep-linking-20)
        - [Assignment and Grade Services (AGS) 2.0](./11-lti-architecture.md#assignment-and-grade-services-ags-20)
        - [Names and Role Provisioning Services (NRPS) 2.0](./11-lti-architecture.md#names-and-role-provisioning-services-nrps-20)
    - [LTI Message Flow Architecture](./11-lti-architecture.md#lti-message-flow-architecture)
      - [1. OIDC Authentication Flow](./11-lti-architecture.md#1-oidc-authentication-flow)
      - [2. Deep Linking Flow](./11-lti-architecture.md#2-deep-linking-flow)
    - [LTI Claims and Context](./11-lti-architecture.md#lti-claims-and-context)
      - [Required Claims Processing](./11-lti-architecture.md#required-claims-processing)
    - [Platform Registration and Configuration](./11-lti-architecture.md#platform-registration-and-configuration)
      - [Dynamic Registration Support](./11-lti-architecture.md#dynamic-registration-support)
    - [Security Model](./11-lti-architecture.md#security-model)
      - [JWT Validation and Key Management](./11-lti-architecture.md#jwt-validation-and-key-management)
    - [Error Handling and Compliance](./11-lti-architecture.md#error-handling-and-compliance)
      - [LTI Error Responses](./11-lti-architecture.md#lti-error-responses)
  - [12. Backend Architecture](./12-backend-architecture.md)
    - [Service Architecture](./12-backend-architecture.md#service-architecture)
      - [Shared Services Layer](./12-backend-architecture.md#shared-services-layer)
        - [Core AI Services](./12-backend-architecture.md#core-ai-services)
        - [Infrastructure Services](./12-backend-architecture.md#infrastructure-services)
      - [Function Organization](./12-backend-architecture.md#function-organization)
      - [Function Template](./12-backend-architecture.md#function-template)
    - [Database Architecture](./12-backend-architecture.md#database-architecture)
      - [Data Access Layer](./12-backend-architecture.md#data-access-layer)
    - [Cloudflare AI Integration](./12-backend-architecture.md#cloudflare-ai-integration)
      - [Edge AI Inference](./12-backend-architecture.md#edge-ai-inference)
    - [Vectorize Integration](./12-backend-architecture.md#vectorize-integration)
      - [Semantic Search and Content Discovery](./12-backend-architecture.md#semantic-search-and-content-discovery)
    - [Hybrid Storage Architecture](./12-backend-architecture.md#hybrid-storage-architecture)
      - [Combining D1, KV, R2, and Vectorize](./12-backend-architecture.md#combining-d1-kv-r2-and-vectorize)
    - [Vectorize Performance Best Practices](./12-backend-architecture.md#vectorize-performance-best-practices)
      - [Batch Operations for Improved Throughput](./12-backend-architecture.md#batch-operations-for-improved-throughput)
      - [Query Optimization Strategies](./12-backend-architecture.md#query-optimization-strategies)
      - [Metadata Index Design](./12-backend-architecture.md#metadata-index-design)
      - [Index Configuration Considerations](./12-backend-architecture.md#index-configuration-considerations)
    - [Authentication and Authorization](./12-backend-architecture.md#authentication-and-authorization)
      - [Auth Flow](./12-backend-architecture.md#auth-flow)
      - [Middleware/Guards](./12-backend-architecture.md#middlewareguards)
  - [13. Canvas postMessage Integration Architecture](./13-canvas-postmessage-integration-architecture.md)
    - [Overview](./13-canvas-postmessage-integration-architecture.md#overview)
    - [PostMessage Handler Service](./13-canvas-postmessage-integration-architecture.md#postmessage-handler-service)
    - [Canvas Content Extraction](./13-canvas-postmessage-integration-architecture.md#canvas-content-extraction)
    - [Custom Canvas JavaScript Integration](./13-canvas-postmessage-integration-architecture.md#custom-canvas-javascript-integration)
    - [Message Security Implementation](./13-canvas-postmessage-integration-architecture.md#message-security-implementation)
    - [Data Flow Architecture](./13-canvas-postmessage-integration-architecture.md#data-flow-architecture)
  - [14. Theoretical Foundations & Cognitive Science Integration](./14-theoretical-foundations-cognitive-science-integration.md)
    - [Memory Architecture & Learning Dynamics](./14-theoretical-foundations-cognitive-science-integration.md#memory-architecture-learning-dynamics)
      - [Spaced Repetition Algorithm Implementation](./14-theoretical-foundations-cognitive-science-integration.md#spaced-repetition-algorithm-implementation)
      - [Forgetting Curve Modeling](./14-theoretical-foundations-cognitive-science-integration.md#forgetting-curve-modeling)
      - [Retrieval Practice Parameters](./14-theoretical-foundations-cognitive-science-integration.md#retrieval-practice-parameters)
      - [Adaptive Difficulty Adjustment](./14-theoretical-foundations-cognitive-science-integration.md#adaptive-difficulty-adjustment)
    - [Implementation Evidence & Expected Outcomes](./14-theoretical-foundations-cognitive-science-integration.md#implementation-evidence-expected-outcomes)
  - [15. Target User Personas](./15-target-user-personas.md)
    - [1. Struggling STEM Student (Alex)](./15-target-user-personas.md#1-struggling-stem-student-alex)
    - [2. Time-Pressed Faculty Member (Dr. Chen)](./15-target-user-personas.md#2-time-pressed-faculty-member-dr-chen)
    - [3. Academic Success Coach (Maria)](./15-target-user-personas.md#3-academic-success-coach-maria)
  - [16. Use Case Implementation: Alex's Academic Journey](./16-use-case-implementation-alexs-academic-journey.md)
    - [Freshman Year - Introductory Data Science](./16-use-case-implementation-alexs-academic-journey.md#freshman-year-introductory-data-science)
    - [Sophomore Year - Research Methods](./16-use-case-implementation-alexs-academic-journey.md#sophomore-year-research-methods)
    - [Junior Year - Spanish for Business](./16-use-case-implementation-alexs-academic-journey.md#junior-year-spanish-for-business)
    - [Senior Year - Capstone Seminar](./16-use-case-implementation-alexs-academic-journey.md#senior-year-capstone-seminar)
    - [Institutional Impact Tracking](./16-use-case-implementation-alexs-academic-journey.md#institutional-impact-tracking)
  - [17. Unified Project Structure](./17-unified-project-structure.md)
  - [18. Development Workflow](./18-development-workflow.md)
    - [Local Development Setup](./18-development-workflow.md#local-development-setup)
      - [Prerequisites](./18-development-workflow.md#prerequisites)
      - [Initial Setup](./18-development-workflow.md#initial-setup)
      - [Development Commands](./18-development-workflow.md#development-commands)
    - [Environment Configuration](./18-development-workflow.md#environment-configuration)
      - [Required Environment Variables](./18-development-workflow.md#required-environment-variables)
  - [19. Deployment Architecture](./19-deployment-architecture.md)
    - [Deployment Strategy](./19-deployment-architecture.md#deployment-strategy)
    - [CI/CD Pipeline](./19-deployment-architecture.md#cicd-pipeline)
    - [Environments](./19-deployment-architecture.md#environments)
    - [Infrastructure Configuration](./19-deployment-architecture.md#infrastructure-configuration)
  - [20. Security and Performance](./20-security-and-performance.md)
    - [Security Requirements](./20-security-and-performance.md#security-requirements)
    - [Performance Optimization](./20-security-and-performance.md#performance-optimization)
  - [21. Testing Strategy](./21-testing-strategy.md)
    - [Testing Pyramid](./21-testing-strategy.md#testing-pyramid)
    - [Test Organization](./21-testing-strategy.md#test-organization)
      - [Frontend Tests](./21-testing-strategy.md#frontend-tests)
      - [Backend Tests](./21-testing-strategy.md#backend-tests)
      - [E2E Tests](./21-testing-strategy.md#e2e-tests)
    - [Test Examples](./21-testing-strategy.md#test-examples)
      - [Frontend Component Test](./21-testing-strategy.md#frontend-component-test)
      - [Backend API Test](./21-testing-strategy.md#backend-api-test)
      - [E2E Test](./21-testing-strategy.md#e2e-test)
  - [22. Coding Standards](./22-coding-standards.md)
    - [Critical Fullstack Rules](./22-coding-standards.md#critical-fullstack-rules)
    - [Naming Conventions](./22-coding-standards.md#naming-conventions)
    - [TypeScript Conventions](./22-coding-standards.md#typescript-conventions)
    - [React Component Patterns](./22-coding-standards.md#react-component-patterns)
  - [23. Error Handling Strategy](./23-error-handling-strategy.md)
    - [Error Flow](./23-error-handling-strategy.md#error-flow)
    - [Error Response Format](./23-error-handling-strategy.md#error-response-format)
    - [Frontend Error Handling](./23-error-handling-strategy.md#frontend-error-handling)
    - [Backend Error Handling](./23-error-handling-strategy.md#backend-error-handling)
    - [Failure Isolation & Recovery](./23-error-handling-strategy.md#failure-isolation-recovery)
  - [24. Monitoring and Observability](./24-monitoring-and-observability.md)
    - [Monitoring Stack](./24-monitoring-and-observability.md#monitoring-stack)
    - [Cloudflare Analytics Integration](./24-monitoring-and-observability.md#cloudflare-analytics-integration)
    - [Real-time Monitoring Dashboard](./24-monitoring-and-observability.md#real-time-monitoring-dashboard)
    - [Key Metrics](./24-monitoring-and-observability.md#key-metrics)
  - [25. Implementation Roadmap](./25-implementation-roadmap.md)
    - [Phase 1: Foundation (Weeks 1-2)](./25-implementation-roadmap.md#phase-1-foundation-weeks-1-2)
    - [Phase 2: Core Assessment & Chat (Weeks 3-4)](./25-implementation-roadmap.md#phase-2-core-assessment-chat-weeks-3-4)
    - [Phase 3: Canvas Integration & Intelligence (Weeks 5-6)](./25-implementation-roadmap.md#phase-3-canvas-integration-intelligence-weeks-5-6)
    - [Phase 4: Analytics & Enhancement (Weeks 7-8)](./25-implementation-roadmap.md#phase-4-analytics-enhancement-weeks-7-8)
    - [Phase 5: Production Readiness (Weeks 9-10)](./25-implementation-roadmap.md#phase-5-production-readiness-weeks-9-10)
    - [Recommended Implementation Epics](./25-implementation-roadmap.md#recommended-implementation-epics)
  - [26. Risk Mitigation](./26-risk-mitigation.md)
    - [Technical Risks and Mitigations](./26-risk-mitigation.md#technical-risks-and-mitigations)
    - [Operational Risks and Mitigations](./26-risk-mitigation.md#operational-risks-and-mitigations)
    - [Risk Mitigation Strategies](./26-risk-mitigation.md#risk-mitigation-strategies)
  - [27. Design System Implementation](./27-design-system-implementation.md)
    - [Atomic Jolt Brand Integration](./27-design-system-implementation.md#atomic-jolt-brand-integration)
    - [Accessibility & Responsive Design Implementation](./27-design-system-implementation.md#accessibility-responsive-design-implementation)
      - [WCAG 2.1 AA Compliance](./27-design-system-implementation.md#wcag-21-aa-compliance)
      - [Responsive Breakpoints](./27-design-system-implementation.md#responsive-breakpoints)
      - [Animation & Micro-interactions](./27-design-system-implementation.md#animation-micro-interactions)
  - [28. Commercialization & Market Strategy](./28-commercialization-market-strategy.md)
    - [Pricing Architecture](./28-commercialization-market-strategy.md#pricing-architecture)
    - [Confirmed Pilot Partnerships](./28-commercialization-market-strategy.md#confirmed-pilot-partnerships)
    - [Competitive Advantages Enabled by Architecture](./28-commercialization-market-strategy.md#competitive-advantages-enabled-by-architecture)
  - [29. Future Innovations Roadmap](./29-future-innovations-roadmap.md)
    - [Phase 2 Innovations (6-12 months)](./29-future-innovations-roadmap.md#phase-2-innovations-6-12-months)
      - [Advanced Interactive Activities](./29-future-innovations-roadmap.md#advanced-interactive-activities)
    - [Phase 3 Innovations (12-18 months)](./29-future-innovations-roadmap.md#phase-3-innovations-12-18-months)
      - [Predictive Learning Path Optimization](./29-future-innovations-roadmap.md#predictive-learning-path-optimization)
    - [Moonshot Concepts (18+ months)](./29-future-innovations-roadmap.md#moonshot-concepts-18-months)
      - [Visual Understanding Assessment](./29-future-innovations-roadmap.md#visual-understanding-assessment)
      - [Portable Learning DNA](./29-future-innovations-roadmap.md#portable-learning-dna)
      - [Cognitive Load Optimization Engine (Advanced)](./29-future-innovations-roadmap.md#cognitive-load-optimization-engine-advanced)
    - [Innovation Evaluation Framework](./29-future-innovations-roadmap.md#innovation-evaluation-framework)
    - [Research & Development Process](./29-future-innovations-roadmap.md#research-development-process)
  - [30. Next Steps](./30-next-steps.md)
    - [Story Manager Handoff](./30-next-steps.md#story-manager-handoff)
    - [Developer Handoff](./30-next-steps.md#developer-handoff)
    - [UI/UX Implementation Guidelines](./30-next-steps.md#uiux-implementation-guidelines)
